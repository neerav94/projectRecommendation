Who Matters? Finding Network Ties Using Earthquakes

Siddhartha Basu, David Daniels, Anthony Vashevko

December 12, 2014

1

Introduction

While social network data can provide a rich his-
tory of personal behavior and interpersonal in-
teractions, it is often unclear how high quality
data maps onto “real” social constructs. Deep
trace data (e.g.
emails, cell phone logs) pro-
vides thorough measurement, but cannot often
identify important aspects of behavior: [3] is a
person emailing their friend, their spouse, their
colleague? Because the content of such relation-
ships can be of extreme importance to social the-
ory [4], researchers have looked for ways to iden-
tify such ties in the absence of true data, often
relying on tie weighting. Using a trace dataset
that allows for the identiﬁcation of close relation-
ships, we attempted to uncover network charac-
teristics that predict close relationships, as well
as to quantify the granularity of network data
necessary to be able to perform this prediction
reliably.

The attempt was not successful. We at-
tempted to predict the presence of two kinds of
close relationships using support vector machines
(SVMs) and logistic regression in networks. Op-
timal prediction models failed to predict any im-
portant relationships in the test set. That is to
say, though models were occasionally able to sep-
arate unimportant ties from important ties dur-
ing training, they predicted that all test ties were
unimportant to the focal ego.

These results are naturally disappointing –
they suggest that standard network measures of
tie importance are incredibly coarse for the kind
of social science conducted on trace data. The
conclusion of the paper discusses various ﬂaws
of the approach we took here, suggesting ways to
improve this analysis in a way that might conﬁrm

the intutitions behind network measures. Nev-
ertheless, our results appear to be disappointing
for researchers who wish to rely on trace data as
a high quality measure of social life.

2 Data

This paper relies on a novel dataset of cell phone
calls and texts acquired from a Chinese telecom-
munication company. The data covers phone use
in a single province (Sichuan) over a period of
four months (March-June 2013). The data in-
cludes information on all calls and texts made by
or two a population of 157 thousand subscribers,
along with basic demographic information about
these subscribers, such as phone and plan char-
acteristics.

Two features set this data apart: First, the
data includes information about family plans,
allowing us to diﬀerentiate communications be-
tween family members from communications to
outside partners. Second, a major earthquake
struck the province during the period of obser-
vation. Following other ongoing work on this
dataset [5], we propose that the ﬁrst calls and
texts made after the earthquake reach out to im-
portant individuals – key providers of support
and resources (emotional and otherwise) to the
subscribers in the data set. These people rep-
resent a unique ground truth for identifying the
contacts that matter to people. Our goal in this
project is to attempt to predict these two classes
of important ties: family members, and targets
and sources of ﬁrst calls.

For each ego, we identify the ﬁrst call or text
made to or from that ego, and label the source
or target of that communication as the ﬁrst call
partner. One weakness of this approach is that

1

Who Matters? Finding Network Ties Using Earthquakes

Siddhartha Basu, David Daniels, Anthony Vashevko

December 12, 2014

1

Introduction

While social network data can provide a rich his-
tory of personal behavior and interpersonal in-
teractions, it is often unclear how high quality
data maps onto “real” social constructs. Deep
trace data (e.g.
emails, cell phone logs) pro-
vides thorough measurement, but cannot often
identify important aspects of behavior: [3] is a
person emailing their friend, their spouse, their
colleague? Because the content of such relation-
ships can be of extreme importance to social the-
ory [4], researchers have looked for ways to iden-
tify such ties in the absence of true data, often
relying on tie weighting. Using a trace dataset
that allows for the identiﬁcation of close relation-
ships, we attempted to uncover network charac-
teristics that predict close relationships, as well
as to quantify the granularity of network data
necessary to be able to perform this prediction
reliably.

The attempt was not successful. We at-
tempted to predict the presence of two kinds of
close relationships using support vector machines
(SVMs) and logistic regression in networks. Op-
timal prediction models failed to predict any im-
portant relationships in the test set. That is to
say, though models were occasionally able to sep-
arate unimportant ties from important ties dur-
ing training, they predicted that all test ties were
unimportant to the focal ego.

These results are naturally disappointing –
they suggest that standard network measures of
tie importance are incredibly coarse for the kind
of social science conducted on trace data. The
conclusion of the paper discusses various ﬂaws
of the approach we took here, suggesting ways to
improve this analysis in a way that might conﬁrm

the intutitions behind network measures. Nev-
ertheless, our results appear to be disappointing
for researchers who wish to rely on trace data as
a high quality measure of social life.

2 Data

This paper relies on a novel dataset of cell phone
calls and texts acquired from a Chinese telecom-
munication company. The data covers phone use
in a single province (Sichuan) over a period of
four months (March-June 2013). The data in-
cludes information on all calls and texts made by
or two a population of 157 thousand subscribers,
along with basic demographic information about
these subscribers, such as phone and plan char-
acteristics.

Two features set this data apart: First, the
data includes information about family plans,
allowing us to diﬀerentiate communications be-
tween family members from communications to
outside partners. Second, a major earthquake
struck the province during the period of obser-
vation. Following other ongoing work on this
dataset [5], we propose that the ﬁrst calls and
texts made after the earthquake reach out to im-
portant individuals – key providers of support
and resources (emotional and otherwise) to the
subscribers in the data set. These people rep-
resent a unique ground truth for identifying the
contacts that matter to people. Our goal in this
project is to attempt to predict these two classes
of important ties: family members, and targets
and sources of ﬁrst calls.

For each ego, we identify the ﬁrst call or text
made to or from that ego, and label the source
or target of that communication as the ﬁrst call
partner. One weakness of this approach is that

1

we examine only ﬁrst calls. It would of course
be straightforward to extend this measure to be
a ranking of alters by their ordinal ‘importance’
to the ego.

A more serious shortcoming of this dataset is
that the Chinese telecommunications market is
split into several major ﬁrms. Because our data
comes from only one of those ﬁrms, we have no
knowledge of the communications among alters
– we do not have the complete network of com-
munication, and in fact we do not have complete
communication networks even for the immediate
ego-network around any subscriber. As such, we
aren’t able to use measures of network embed-
dedness to identify important ties.

3 Features

We used several classes of data to represent the
kind of information that might be available to
researchers. We examine tie weight, coarse net-
work timing information, and ﬁner network tim-
ing information. We restrict data to all commu-
nication that took place prior to the time of the
earthquake.

Tie Weight Tie weight is the overall number
of times that i contacted j.

Tie Variance Tie variance is the week-to-
week variance in the number of communication
events that occured from i to j.

Interresponse Time We calculated the me-
dian time elapsed between the last communica-
tion from j to i and the next event from i to j.
Because the average inter-response time is essen-
tially the inverse of the frequency of communica-
tion events, we used the median to capture the
extent to which communication events clustered
between the two agents. As an alternative mea-
sure of the same concept, we calculated the frac-
tion of all inter-response times that took place
within an hour of each other.

Tie weight and variance were split between
voice calls and text, and were additionally split
for ego-to-alter communication and alter-to-ego

communication. That is to say, we had separate
features for the amounts of texts a subscriber
sent to some communication partner and for the
number of texts the partner sent back. Finally,
because several of these measures were undeﬁned
in the absence of suﬃcient communication from
i to j, we included indicators for missing data as
hopefully informative features.

4 Models

To capture the idea that researchers might have
limited information available in any given data
set, we nested the above information in three
models:

Model 1 Model 1 included tie weight features
only, to represent a barebones network dataset.

Model 2 Model 2 included all features from
Model 1 as well as tie variance features, to cap-
ture the availability of limited network timing
data.

Model 3 Model 3 included all
features
from Model 2 as well as the response time fea-
tures, to represent a rich network timing dataset.

Our data analysis was conducted in R, using
the e1071 wrapper to aid us in implementing lib-
svm. Libsvm is a powerful package that provides
extensive ﬂexibility in classiﬁcation algorithms
and analysis which proved to be useful in ap-
plying the following learning models and then
studying how they performed. [2]

Logistic Regression Our ﬁrst cut at the anal-
ysis is by implementing logistic regression on
the data. Using Rs base package, we ran logis-
tic regressions to predict one of two dependent
variables. The ﬁrst of these is an indicator for
whether two individuals are in the same fam-
ily plan, and the second of these is an indicator
for whether there was a call between two people
in the immediate aftermath of the earthquake.
The independent variables are those described
above. Speciﬁcally, the ﬁrst model includes call

2

Who Matters? Finding Network Ties Using Earthquakes

Siddhartha Basu, David Daniels, Anthony Vashevko

December 12, 2014

1

Introduction

While social network data can provide a rich his-
tory of personal behavior and interpersonal in-
teractions, it is often unclear how high quality
data maps onto “real” social constructs. Deep
trace data (e.g.
emails, cell phone logs) pro-
vides thorough measurement, but cannot often
identify important aspects of behavior: [3] is a
person emailing their friend, their spouse, their
colleague? Because the content of such relation-
ships can be of extreme importance to social the-
ory [4], researchers have looked for ways to iden-
tify such ties in the absence of true data, often
relying on tie weighting. Using a trace dataset
that allows for the identiﬁcation of close relation-
ships, we attempted to uncover network charac-
teristics that predict close relationships, as well
as to quantify the granularity of network data
necessary to be able to perform this prediction
reliably.

The attempt was not successful. We at-
tempted to predict the presence of two kinds of
close relationships using support vector machines
(SVMs) and logistic regression in networks. Op-
timal prediction models failed to predict any im-
portant relationships in the test set. That is to
say, though models were occasionally able to sep-
arate unimportant ties from important ties dur-
ing training, they predicted that all test ties were
unimportant to the focal ego.

These results are naturally disappointing –
they suggest that standard network measures of
tie importance are incredibly coarse for the kind
of social science conducted on trace data. The
conclusion of the paper discusses various ﬂaws
of the approach we took here, suggesting ways to
improve this analysis in a way that might conﬁrm

the intutitions behind network measures. Nev-
ertheless, our results appear to be disappointing
for researchers who wish to rely on trace data as
a high quality measure of social life.

2 Data

This paper relies on a novel dataset of cell phone
calls and texts acquired from a Chinese telecom-
munication company. The data covers phone use
in a single province (Sichuan) over a period of
four months (March-June 2013). The data in-
cludes information on all calls and texts made by
or two a population of 157 thousand subscribers,
along with basic demographic information about
these subscribers, such as phone and plan char-
acteristics.

Two features set this data apart: First, the
data includes information about family plans,
allowing us to diﬀerentiate communications be-
tween family members from communications to
outside partners. Second, a major earthquake
struck the province during the period of obser-
vation. Following other ongoing work on this
dataset [5], we propose that the ﬁrst calls and
texts made after the earthquake reach out to im-
portant individuals – key providers of support
and resources (emotional and otherwise) to the
subscribers in the data set. These people rep-
resent a unique ground truth for identifying the
contacts that matter to people. Our goal in this
project is to attempt to predict these two classes
of important ties: family members, and targets
and sources of ﬁrst calls.

For each ego, we identify the ﬁrst call or text
made to or from that ego, and label the source
or target of that communication as the ﬁrst call
partner. One weakness of this approach is that

1

we examine only ﬁrst calls. It would of course
be straightforward to extend this measure to be
a ranking of alters by their ordinal ‘importance’
to the ego.

A more serious shortcoming of this dataset is
that the Chinese telecommunications market is
split into several major ﬁrms. Because our data
comes from only one of those ﬁrms, we have no
knowledge of the communications among alters
– we do not have the complete network of com-
munication, and in fact we do not have complete
communication networks even for the immediate
ego-network around any subscriber. As such, we
aren’t able to use measures of network embed-
dedness to identify important ties.

3 Features

We used several classes of data to represent the
kind of information that might be available to
researchers. We examine tie weight, coarse net-
work timing information, and ﬁner network tim-
ing information. We restrict data to all commu-
nication that took place prior to the time of the
earthquake.

Tie Weight Tie weight is the overall number
of times that i contacted j.

Tie Variance Tie variance is the week-to-
week variance in the number of communication
events that occured from i to j.

Interresponse Time We calculated the me-
dian time elapsed between the last communica-
tion from j to i and the next event from i to j.
Because the average inter-response time is essen-
tially the inverse of the frequency of communica-
tion events, we used the median to capture the
extent to which communication events clustered
between the two agents. As an alternative mea-
sure of the same concept, we calculated the frac-
tion of all inter-response times that took place
within an hour of each other.

Tie weight and variance were split between
voice calls and text, and were additionally split
for ego-to-alter communication and alter-to-ego

communication. That is to say, we had separate
features for the amounts of texts a subscriber
sent to some communication partner and for the
number of texts the partner sent back. Finally,
because several of these measures were undeﬁned
in the absence of suﬃcient communication from
i to j, we included indicators for missing data as
hopefully informative features.

4 Models

To capture the idea that researchers might have
limited information available in any given data
set, we nested the above information in three
models:

Model 1 Model 1 included tie weight features
only, to represent a barebones network dataset.

Model 2 Model 2 included all features from
Model 1 as well as tie variance features, to cap-
ture the availability of limited network timing
data.

Model 3 Model 3 included all
features
from Model 2 as well as the response time fea-
tures, to represent a rich network timing dataset.

Our data analysis was conducted in R, using
the e1071 wrapper to aid us in implementing lib-
svm. Libsvm is a powerful package that provides
extensive ﬂexibility in classiﬁcation algorithms
and analysis which proved to be useful in ap-
plying the following learning models and then
studying how they performed. [2]

Logistic Regression Our ﬁrst cut at the anal-
ysis is by implementing logistic regression on
the data. Using Rs base package, we ran logis-
tic regressions to predict one of two dependent
variables. The ﬁrst of these is an indicator for
whether two individuals are in the same fam-
ily plan, and the second of these is an indicator
for whether there was a call between two people
in the immediate aftermath of the earthquake.
The independent variables are those described
above. Speciﬁcally, the ﬁrst model includes call

2

volume, the second includes volume and call vari-
ance, and the third includes the second combined
with time between calls and texts, and how long
it takes people to respond to calls and texts be-
tween egos and alters.

Support Vector Machine We then pro-
ceeded to analyze the data using support vector
machines. A main advantage of SVMs is that by
using kernels, we can gain insights from higher
dimensional spaces while still using a relatively
small number of features. Our ﬁrst SVM imple-
mented a Gaussian kernel. We did this by utiliz-
ing LIBSVM’s radial basis function (RBF). The
outcome variables (same family/not, and call af-
ter earthquake/not) were the same as in the lo-
gistic regression. The same can be said of our
features. The second kernel that we used was
the sigmoid function. The outcome variables and
features are again the same as before.

Finally, our modeling strategy assumes the in-
dependence of ties. We select samples for train-
ing and testing by selecting a random subset of
subscribers and including for analysis all alters
who called or were called by these subscribers.
There is a problem here in that one of our mea-
sures of importance, the ﬁrst call, is by deﬁnition
constrained to a single alter for any given ego –
any person had to have exactly one ﬁrst call.
We did not incorporate this constraint into our
model. Doing so would appear to lead towards a
relatively complicated approach of multinomial
classiﬁcation with a variable number of ‘classes’
per ego. Given more time, this approach would
be worth exploring. Nevertheless, our hope was
that the current approach would at best produce
a high rate of false positives, as the model iden-
tiﬁed important alters that were not ﬁrst calls,
but came close.

5 Results

5.1 SVM Parameter Selection

and tested them on another subset. Our opti-
mality criteria were models with minimal RMSE
and maximal recall. We selected the RMSE cri-
terion in order to capture the overall accuracy
of the model. The number of positive examples
was very small, however – egos had about 100
possible contacts on average, and only about 2-3
of these were family ties, and only one of these
was a ﬁrst call tie. Because we were interested
in identifying instances of these rare important
ties, we also chose to maximize recall.

Figure 1 shows the outcome of these tests. The
plots are jittered because almost all parameter
values produced identical prediction outcomes:
the major diﬀerence was how many positive pre-
dictions a given model was able to make. There
are two points to note here: First, RBF outper-
formed the sigmoid kernel on RMSE measures,
but the sigmoid kernel showed better recall and
greater variability of recall across both family
and ﬁrst call models. Second, RBF was com-
pletely unable to predict instances of ﬁrst callers.
With these results in mind, we proceeded to
the full models by selecting the grid parameters
that produced the lowest RMSE at the highest
observed recall – essentially, those models that
had the fewest false positives of those that had
the most true positives. We tried out diﬀerent
combinations of these ‘optimal’ results, but this
did not substantially aﬀect results from the ﬁnal
models.

5.2 Full Models

As explained above, we estimated the three mod-
els above with three techniques: logistic regres-
sion, SVM with a Gaussian kernel, and SVM
with a sigmoid kernel. Because solution time for
the SVM algorithm grows quickly in the size of
the data set, we restricted the training and test
sets for all models to a 0.2 percent sample of all
subscribers. This about 30,000 tie observations
for about 300 subscribers. Table 1 presents the
RMSE and recall on the test set after ﬁtting all
models.

We attempted to select optimal parameter set-
tings for two classes of SVM via a grid search
procedure. We ﬁt models to a subset of the data

As the table suggests, most models were un-
able to predict any true positives. Table 2
presents a sample confusion table for the logistic

3

Who Matters? Finding Network Ties Using Earthquakes

Siddhartha Basu, David Daniels, Anthony Vashevko

December 12, 2014

1

Introduction

While social network data can provide a rich his-
tory of personal behavior and interpersonal in-
teractions, it is often unclear how high quality
data maps onto “real” social constructs. Deep
trace data (e.g.
emails, cell phone logs) pro-
vides thorough measurement, but cannot often
identify important aspects of behavior: [3] is a
person emailing their friend, their spouse, their
colleague? Because the content of such relation-
ships can be of extreme importance to social the-
ory [4], researchers have looked for ways to iden-
tify such ties in the absence of true data, often
relying on tie weighting. Using a trace dataset
that allows for the identiﬁcation of close relation-
ships, we attempted to uncover network charac-
teristics that predict close relationships, as well
as to quantify the granularity of network data
necessary to be able to perform this prediction
reliably.

The attempt was not successful. We at-
tempted to predict the presence of two kinds of
close relationships using support vector machines
(SVMs) and logistic regression in networks. Op-
timal prediction models failed to predict any im-
portant relationships in the test set. That is to
say, though models were occasionally able to sep-
arate unimportant ties from important ties dur-
ing training, they predicted that all test ties were
unimportant to the focal ego.

These results are naturally disappointing –
they suggest that standard network measures of
tie importance are incredibly coarse for the kind
of social science conducted on trace data. The
conclusion of the paper discusses various ﬂaws
of the approach we took here, suggesting ways to
improve this analysis in a way that might conﬁrm

the intutitions behind network measures. Nev-
ertheless, our results appear to be disappointing
for researchers who wish to rely on trace data as
a high quality measure of social life.

2 Data

This paper relies on a novel dataset of cell phone
calls and texts acquired from a Chinese telecom-
munication company. The data covers phone use
in a single province (Sichuan) over a period of
four months (March-June 2013). The data in-
cludes information on all calls and texts made by
or two a population of 157 thousand subscribers,
along with basic demographic information about
these subscribers, such as phone and plan char-
acteristics.

Two features set this data apart: First, the
data includes information about family plans,
allowing us to diﬀerentiate communications be-
tween family members from communications to
outside partners. Second, a major earthquake
struck the province during the period of obser-
vation. Following other ongoing work on this
dataset [5], we propose that the ﬁrst calls and
texts made after the earthquake reach out to im-
portant individuals – key providers of support
and resources (emotional and otherwise) to the
subscribers in the data set. These people rep-
resent a unique ground truth for identifying the
contacts that matter to people. Our goal in this
project is to attempt to predict these two classes
of important ties: family members, and targets
and sources of ﬁrst calls.

For each ego, we identify the ﬁrst call or text
made to or from that ego, and label the source
or target of that communication as the ﬁrst call
partner. One weakness of this approach is that

1

we examine only ﬁrst calls. It would of course
be straightforward to extend this measure to be
a ranking of alters by their ordinal ‘importance’
to the ego.

A more serious shortcoming of this dataset is
that the Chinese telecommunications market is
split into several major ﬁrms. Because our data
comes from only one of those ﬁrms, we have no
knowledge of the communications among alters
– we do not have the complete network of com-
munication, and in fact we do not have complete
communication networks even for the immediate
ego-network around any subscriber. As such, we
aren’t able to use measures of network embed-
dedness to identify important ties.

3 Features

We used several classes of data to represent the
kind of information that might be available to
researchers. We examine tie weight, coarse net-
work timing information, and ﬁner network tim-
ing information. We restrict data to all commu-
nication that took place prior to the time of the
earthquake.

Tie Weight Tie weight is the overall number
of times that i contacted j.

Tie Variance Tie variance is the week-to-
week variance in the number of communication
events that occured from i to j.

Interresponse Time We calculated the me-
dian time elapsed between the last communica-
tion from j to i and the next event from i to j.
Because the average inter-response time is essen-
tially the inverse of the frequency of communica-
tion events, we used the median to capture the
extent to which communication events clustered
between the two agents. As an alternative mea-
sure of the same concept, we calculated the frac-
tion of all inter-response times that took place
within an hour of each other.

Tie weight and variance were split between
voice calls and text, and were additionally split
for ego-to-alter communication and alter-to-ego

communication. That is to say, we had separate
features for the amounts of texts a subscriber
sent to some communication partner and for the
number of texts the partner sent back. Finally,
because several of these measures were undeﬁned
in the absence of suﬃcient communication from
i to j, we included indicators for missing data as
hopefully informative features.

4 Models

To capture the idea that researchers might have
limited information available in any given data
set, we nested the above information in three
models:

Model 1 Model 1 included tie weight features
only, to represent a barebones network dataset.

Model 2 Model 2 included all features from
Model 1 as well as tie variance features, to cap-
ture the availability of limited network timing
data.

Model 3 Model 3 included all
features
from Model 2 as well as the response time fea-
tures, to represent a rich network timing dataset.

Our data analysis was conducted in R, using
the e1071 wrapper to aid us in implementing lib-
svm. Libsvm is a powerful package that provides
extensive ﬂexibility in classiﬁcation algorithms
and analysis which proved to be useful in ap-
plying the following learning models and then
studying how they performed. [2]

Logistic Regression Our ﬁrst cut at the anal-
ysis is by implementing logistic regression on
the data. Using Rs base package, we ran logis-
tic regressions to predict one of two dependent
variables. The ﬁrst of these is an indicator for
whether two individuals are in the same fam-
ily plan, and the second of these is an indicator
for whether there was a call between two people
in the immediate aftermath of the earthquake.
The independent variables are those described
above. Speciﬁcally, the ﬁrst model includes call

2

volume, the second includes volume and call vari-
ance, and the third includes the second combined
with time between calls and texts, and how long
it takes people to respond to calls and texts be-
tween egos and alters.

Support Vector Machine We then pro-
ceeded to analyze the data using support vector
machines. A main advantage of SVMs is that by
using kernels, we can gain insights from higher
dimensional spaces while still using a relatively
small number of features. Our ﬁrst SVM imple-
mented a Gaussian kernel. We did this by utiliz-
ing LIBSVM’s radial basis function (RBF). The
outcome variables (same family/not, and call af-
ter earthquake/not) were the same as in the lo-
gistic regression. The same can be said of our
features. The second kernel that we used was
the sigmoid function. The outcome variables and
features are again the same as before.

Finally, our modeling strategy assumes the in-
dependence of ties. We select samples for train-
ing and testing by selecting a random subset of
subscribers and including for analysis all alters
who called or were called by these subscribers.
There is a problem here in that one of our mea-
sures of importance, the ﬁrst call, is by deﬁnition
constrained to a single alter for any given ego –
any person had to have exactly one ﬁrst call.
We did not incorporate this constraint into our
model. Doing so would appear to lead towards a
relatively complicated approach of multinomial
classiﬁcation with a variable number of ‘classes’
per ego. Given more time, this approach would
be worth exploring. Nevertheless, our hope was
that the current approach would at best produce
a high rate of false positives, as the model iden-
tiﬁed important alters that were not ﬁrst calls,
but came close.

5 Results

5.1 SVM Parameter Selection

and tested them on another subset. Our opti-
mality criteria were models with minimal RMSE
and maximal recall. We selected the RMSE cri-
terion in order to capture the overall accuracy
of the model. The number of positive examples
was very small, however – egos had about 100
possible contacts on average, and only about 2-3
of these were family ties, and only one of these
was a ﬁrst call tie. Because we were interested
in identifying instances of these rare important
ties, we also chose to maximize recall.

Figure 1 shows the outcome of these tests. The
plots are jittered because almost all parameter
values produced identical prediction outcomes:
the major diﬀerence was how many positive pre-
dictions a given model was able to make. There
are two points to note here: First, RBF outper-
formed the sigmoid kernel on RMSE measures,
but the sigmoid kernel showed better recall and
greater variability of recall across both family
and ﬁrst call models. Second, RBF was com-
pletely unable to predict instances of ﬁrst callers.
With these results in mind, we proceeded to
the full models by selecting the grid parameters
that produced the lowest RMSE at the highest
observed recall – essentially, those models that
had the fewest false positives of those that had
the most true positives. We tried out diﬀerent
combinations of these ‘optimal’ results, but this
did not substantially aﬀect results from the ﬁnal
models.

5.2 Full Models

As explained above, we estimated the three mod-
els above with three techniques: logistic regres-
sion, SVM with a Gaussian kernel, and SVM
with a sigmoid kernel. Because solution time for
the SVM algorithm grows quickly in the size of
the data set, we restricted the training and test
sets for all models to a 0.2 percent sample of all
subscribers. This about 30,000 tie observations
for about 300 subscribers. Table 1 presents the
RMSE and recall on the test set after ﬁtting all
models.

We attempted to select optimal parameter set-
tings for two classes of SVM via a grid search
procedure. We ﬁt models to a subset of the data

As the table suggests, most models were un-
able to predict any true positives. Table 2
presents a sample confusion table for the logistic

3

(a) RBF - Same Family

(b) RBF - First Call

(c) Sigmoid - Same Family

(d) Sigmoid - First Call

Figure 1: SVM Parameter Tuning: Recall and RMSE

model on same family, which was the most suc-
cessful model for producing positive predictions.
As the confusion table suggests, the RMSE and
overall accuracy were substantially driven by the
true incidence rate of same family or ﬁrst call ties
– because the models classiﬁed almost all ties
as non-instances of the same family or ﬁrst call
class, they misclassiﬁed all of these as false nega-
tives. In fact, all SVM models made no positive
predictions, failing completely to identify impor-
tant ties in the test set.

models. It may have been better to measure tie
strengths relative to the ego’s average or total
volumes of communication.

The more troubling possibility is that depen-
dence among ties made binary classiﬁcation un-
viable – no model that doesn’t take into consid-
eration the overall network of ties around an ego
could successfully make same family or ﬁrst call
predictions. Given our inability to observe most
members of the network, however, it is unclear
how far we could have gone down this route.

6 Discussion

7 Conclusion and Future

There are several concerns with the models pre-
sented here. First, it may well be that our fea-
tures imperfectly captured the true nature of
the network. This is troubling – at the very
least Model 1 measuring total tie communica-
tions should have helped discriminate between
important and unimportant ties. In fact, it did
show signiﬁcant predictive power in the logistic
regression. Nevertheless, it did not help discrim-
inate among observations in the test set.

It may well be that our modeling strategy
failed to capture ego-level heterogeneity in com-
munication: people with radically diﬀerent vol-
umes of communication may have confused the

The most surprising ﬁndings are that network in-
formation does not appear to easily identify im-
portant ties, and perhaps more importantly, that
adding deeper information appears to have little
if any discriminatory beneﬁt in this task. This is
troubling for existing studies of social networks,
as well as for the research promise of trace data.
The broad conclusion appears to be that im-
portant ties hide well in networks – it is not clear
that detailed network data is capable of identi-
fying family members or important personal and
support ties. SVMs in particular seem to have
trouble making reasonable predictions. As such,
it remains unclear the extent to which standard

4

llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll0.00000.00250.00500.00750.08720.08760.08800.0884RMSERecallllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll−0.00050−0.000250.000000.000250.000500.09500.09510.09520.0953RMSERecallllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll0.000.010.020.030.040.100.110.12RMSERecallllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll0.0000.0050.0100.0150.0200.110.120.130.14RMSERecallWho Matters? Finding Network Ties Using Earthquakes

Siddhartha Basu, David Daniels, Anthony Vashevko

December 12, 2014

1

Introduction

While social network data can provide a rich his-
tory of personal behavior and interpersonal in-
teractions, it is often unclear how high quality
data maps onto “real” social constructs. Deep
trace data (e.g.
emails, cell phone logs) pro-
vides thorough measurement, but cannot often
identify important aspects of behavior: [3] is a
person emailing their friend, their spouse, their
colleague? Because the content of such relation-
ships can be of extreme importance to social the-
ory [4], researchers have looked for ways to iden-
tify such ties in the absence of true data, often
relying on tie weighting. Using a trace dataset
that allows for the identiﬁcation of close relation-
ships, we attempted to uncover network charac-
teristics that predict close relationships, as well
as to quantify the granularity of network data
necessary to be able to perform this prediction
reliably.

The attempt was not successful. We at-
tempted to predict the presence of two kinds of
close relationships using support vector machines
(SVMs) and logistic regression in networks. Op-
timal prediction models failed to predict any im-
portant relationships in the test set. That is to
say, though models were occasionally able to sep-
arate unimportant ties from important ties dur-
ing training, they predicted that all test ties were
unimportant to the focal ego.

These results are naturally disappointing –
they suggest that standard network measures of
tie importance are incredibly coarse for the kind
of social science conducted on trace data. The
conclusion of the paper discusses various ﬂaws
of the approach we took here, suggesting ways to
improve this analysis in a way that might conﬁrm

the intutitions behind network measures. Nev-
ertheless, our results appear to be disappointing
for researchers who wish to rely on trace data as
a high quality measure of social life.

2 Data

This paper relies on a novel dataset of cell phone
calls and texts acquired from a Chinese telecom-
munication company. The data covers phone use
in a single province (Sichuan) over a period of
four months (March-June 2013). The data in-
cludes information on all calls and texts made by
or two a population of 157 thousand subscribers,
along with basic demographic information about
these subscribers, such as phone and plan char-
acteristics.

Two features set this data apart: First, the
data includes information about family plans,
allowing us to diﬀerentiate communications be-
tween family members from communications to
outside partners. Second, a major earthquake
struck the province during the period of obser-
vation. Following other ongoing work on this
dataset [5], we propose that the ﬁrst calls and
texts made after the earthquake reach out to im-
portant individuals – key providers of support
and resources (emotional and otherwise) to the
subscribers in the data set. These people rep-
resent a unique ground truth for identifying the
contacts that matter to people. Our goal in this
project is to attempt to predict these two classes
of important ties: family members, and targets
and sources of ﬁrst calls.

For each ego, we identify the ﬁrst call or text
made to or from that ego, and label the source
or target of that communication as the ﬁrst call
partner. One weakness of this approach is that

1

we examine only ﬁrst calls. It would of course
be straightforward to extend this measure to be
a ranking of alters by their ordinal ‘importance’
to the ego.

A more serious shortcoming of this dataset is
that the Chinese telecommunications market is
split into several major ﬁrms. Because our data
comes from only one of those ﬁrms, we have no
knowledge of the communications among alters
– we do not have the complete network of com-
munication, and in fact we do not have complete
communication networks even for the immediate
ego-network around any subscriber. As such, we
aren’t able to use measures of network embed-
dedness to identify important ties.

3 Features

We used several classes of data to represent the
kind of information that might be available to
researchers. We examine tie weight, coarse net-
work timing information, and ﬁner network tim-
ing information. We restrict data to all commu-
nication that took place prior to the time of the
earthquake.

Tie Weight Tie weight is the overall number
of times that i contacted j.

Tie Variance Tie variance is the week-to-
week variance in the number of communication
events that occured from i to j.

Interresponse Time We calculated the me-
dian time elapsed between the last communica-
tion from j to i and the next event from i to j.
Because the average inter-response time is essen-
tially the inverse of the frequency of communica-
tion events, we used the median to capture the
extent to which communication events clustered
between the two agents. As an alternative mea-
sure of the same concept, we calculated the frac-
tion of all inter-response times that took place
within an hour of each other.

Tie weight and variance were split between
voice calls and text, and were additionally split
for ego-to-alter communication and alter-to-ego

communication. That is to say, we had separate
features for the amounts of texts a subscriber
sent to some communication partner and for the
number of texts the partner sent back. Finally,
because several of these measures were undeﬁned
in the absence of suﬃcient communication from
i to j, we included indicators for missing data as
hopefully informative features.

4 Models

To capture the idea that researchers might have
limited information available in any given data
set, we nested the above information in three
models:

Model 1 Model 1 included tie weight features
only, to represent a barebones network dataset.

Model 2 Model 2 included all features from
Model 1 as well as tie variance features, to cap-
ture the availability of limited network timing
data.

Model 3 Model 3 included all
features
from Model 2 as well as the response time fea-
tures, to represent a rich network timing dataset.

Our data analysis was conducted in R, using
the e1071 wrapper to aid us in implementing lib-
svm. Libsvm is a powerful package that provides
extensive ﬂexibility in classiﬁcation algorithms
and analysis which proved to be useful in ap-
plying the following learning models and then
studying how they performed. [2]

Logistic Regression Our ﬁrst cut at the anal-
ysis is by implementing logistic regression on
the data. Using Rs base package, we ran logis-
tic regressions to predict one of two dependent
variables. The ﬁrst of these is an indicator for
whether two individuals are in the same fam-
ily plan, and the second of these is an indicator
for whether there was a call between two people
in the immediate aftermath of the earthquake.
The independent variables are those described
above. Speciﬁcally, the ﬁrst model includes call

2

volume, the second includes volume and call vari-
ance, and the third includes the second combined
with time between calls and texts, and how long
it takes people to respond to calls and texts be-
tween egos and alters.

Support Vector Machine We then pro-
ceeded to analyze the data using support vector
machines. A main advantage of SVMs is that by
using kernels, we can gain insights from higher
dimensional spaces while still using a relatively
small number of features. Our ﬁrst SVM imple-
mented a Gaussian kernel. We did this by utiliz-
ing LIBSVM’s radial basis function (RBF). The
outcome variables (same family/not, and call af-
ter earthquake/not) were the same as in the lo-
gistic regression. The same can be said of our
features. The second kernel that we used was
the sigmoid function. The outcome variables and
features are again the same as before.

Finally, our modeling strategy assumes the in-
dependence of ties. We select samples for train-
ing and testing by selecting a random subset of
subscribers and including for analysis all alters
who called or were called by these subscribers.
There is a problem here in that one of our mea-
sures of importance, the ﬁrst call, is by deﬁnition
constrained to a single alter for any given ego –
any person had to have exactly one ﬁrst call.
We did not incorporate this constraint into our
model. Doing so would appear to lead towards a
relatively complicated approach of multinomial
classiﬁcation with a variable number of ‘classes’
per ego. Given more time, this approach would
be worth exploring. Nevertheless, our hope was
that the current approach would at best produce
a high rate of false positives, as the model iden-
tiﬁed important alters that were not ﬁrst calls,
but came close.

5 Results

5.1 SVM Parameter Selection

and tested them on another subset. Our opti-
mality criteria were models with minimal RMSE
and maximal recall. We selected the RMSE cri-
terion in order to capture the overall accuracy
of the model. The number of positive examples
was very small, however – egos had about 100
possible contacts on average, and only about 2-3
of these were family ties, and only one of these
was a ﬁrst call tie. Because we were interested
in identifying instances of these rare important
ties, we also chose to maximize recall.

Figure 1 shows the outcome of these tests. The
plots are jittered because almost all parameter
values produced identical prediction outcomes:
the major diﬀerence was how many positive pre-
dictions a given model was able to make. There
are two points to note here: First, RBF outper-
formed the sigmoid kernel on RMSE measures,
but the sigmoid kernel showed better recall and
greater variability of recall across both family
and ﬁrst call models. Second, RBF was com-
pletely unable to predict instances of ﬁrst callers.
With these results in mind, we proceeded to
the full models by selecting the grid parameters
that produced the lowest RMSE at the highest
observed recall – essentially, those models that
had the fewest false positives of those that had
the most true positives. We tried out diﬀerent
combinations of these ‘optimal’ results, but this
did not substantially aﬀect results from the ﬁnal
models.

5.2 Full Models

As explained above, we estimated the three mod-
els above with three techniques: logistic regres-
sion, SVM with a Gaussian kernel, and SVM
with a sigmoid kernel. Because solution time for
the SVM algorithm grows quickly in the size of
the data set, we restricted the training and test
sets for all models to a 0.2 percent sample of all
subscribers. This about 30,000 tie observations
for about 300 subscribers. Table 1 presents the
RMSE and recall on the test set after ﬁtting all
models.

We attempted to select optimal parameter set-
tings for two classes of SVM via a grid search
procedure. We ﬁt models to a subset of the data

As the table suggests, most models were un-
able to predict any true positives. Table 2
presents a sample confusion table for the logistic

3

(a) RBF - Same Family

(b) RBF - First Call

(c) Sigmoid - Same Family

(d) Sigmoid - First Call

Figure 1: SVM Parameter Tuning: Recall and RMSE

model on same family, which was the most suc-
cessful model for producing positive predictions.
As the confusion table suggests, the RMSE and
overall accuracy were substantially driven by the
true incidence rate of same family or ﬁrst call ties
– because the models classiﬁed almost all ties
as non-instances of the same family or ﬁrst call
class, they misclassiﬁed all of these as false nega-
tives. In fact, all SVM models made no positive
predictions, failing completely to identify impor-
tant ties in the test set.

models. It may have been better to measure tie
strengths relative to the ego’s average or total
volumes of communication.

The more troubling possibility is that depen-
dence among ties made binary classiﬁcation un-
viable – no model that doesn’t take into consid-
eration the overall network of ties around an ego
could successfully make same family or ﬁrst call
predictions. Given our inability to observe most
members of the network, however, it is unclear
how far we could have gone down this route.

6 Discussion

7 Conclusion and Future

There are several concerns with the models pre-
sented here. First, it may well be that our fea-
tures imperfectly captured the true nature of
the network. This is troubling – at the very
least Model 1 measuring total tie communica-
tions should have helped discriminate between
important and unimportant ties. In fact, it did
show signiﬁcant predictive power in the logistic
regression. Nevertheless, it did not help discrim-
inate among observations in the test set.

It may well be that our modeling strategy
failed to capture ego-level heterogeneity in com-
munication: people with radically diﬀerent vol-
umes of communication may have confused the

The most surprising ﬁndings are that network in-
formation does not appear to easily identify im-
portant ties, and perhaps more importantly, that
adding deeper information appears to have little
if any discriminatory beneﬁt in this task. This is
troubling for existing studies of social networks,
as well as for the research promise of trace data.
The broad conclusion appears to be that im-
portant ties hide well in networks – it is not clear
that detailed network data is capable of identi-
fying family members or important personal and
support ties. SVMs in particular seem to have
trouble making reasonable predictions. As such,
it remains unclear the extent to which standard

4

llllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll0.00000.00250.00500.00750.08720.08760.08800.0884RMSERecallllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll−0.00050−0.000250.000000.000250.000500.09500.09510.09520.0953RMSERecallllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll0.000.010.020.030.040.100.110.12RMSERecallllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllll0.0000.0050.0100.0150.0200.110.120.130.14RMSERecall[7] unanticipated lapses in cell phone ser-
vice, etc.

4. Extend to analysis of exogenous shocks to
other social networks such as Twitter, Face-
book, or LinkedIn. [6]

References

[1] Joshua Blumenstock, Nathan Eagle, and
Marcel Fafchamps. Risk and Reciprocity
Over the Mobile Phone Network: Evidence
from Rwanda. 2011.

[2] Chih-chung Chang and Chih-jen Lin. LIb-
sVm: A library for Support Vector Machines.
ACM Transactions on Intelligent Systems
and Technology, 2(3):27:1—-27:27, 2013.

[3] Nathan Eagle, Alex Sandy Pentland, and
David Lazer.
Inferring friendship network
structure by using mobile phone data. Pro-
ceedings of the National Academy of Sci-
ences of
the United States of America,
106(36):15274–8, sep 2009.

[4] Mark S. Granovetter.

The Strength of
Weak Ties. American Journal of Sociology,
78(6):1360–1380, 1973.

[5] Jayson J. Jia and Jianmin Jia. Tie Impor-
tance and Social Network Embeddedness Re-
vealed by Earthquake. 2014.

[6] Jure Leskovec and Andrej Krevl.

SNAP
Datasets: Stanford Large Network Dataset
Collection, 2014.

[7] A. Craig MacKinlay. Event Studies in Eco-
nomics and Finance. Journal of Economic
Literature, 35(1):13–39, 1997.

Same Family

Logistic (M1)
Logistic (M2)
Logistic (M3)
SVM-RBF (M1)
SVM-RBF (M2)
SVM-RBF (M3)
SVM-Sigmoid (M1)
SVM-Sigmoid (M2)
SVM-Sigmoid (M3)

RMSE Recall
0.0450
0.0874
0.0450
0.0876
0.0876
0.0450
0
0.0859
0
0.0859
0.0859
0
0
0.0859
0
0.0859
0.0859
0

First Call

Logistic (M1)
Logistic (M2)
Logistic (M3)
SVM-RBF (M1)
SVM-RBF (M2)
SVM-RBF (M3)
SVM-Sigmoid (M1)
SVM-Sigmoid (M2)
SVM-Sigmoid (M3)

RMSE Recall
0.0988
0.0990
0.0990
0.0988
0.0988
0.0988
0.0988
0.0988
0.0988

0
0
0
0
0
0
0
0
0

Table 1: RMSE and Recall of Full Models

network measures of tie importance are eﬀective.
Further research could further improve on our
methods, and might include the following tasks:

1. Implement SVMs on a larger subsample of

the dataset

2. Explore alternate estimation processes, per-
haps moving to Hadoop MapReduce to al-
low us to process both the volume of data
and an extended set of features.

3. Extend analysis to other exogenous shocks
to cell phone communications, such as other
natural disasters, [1] surprise ﬁnancial news,

True
Predicted 0
1

0
29868
19

1
212
10

Table 2: Confusion Table: Logistic (M3) for
Same Family

5

