Strength in numbers? Modelling the impact of businesses

on each other

Amir Abbas Sadeghian
amirabs@stanford.edu

Hakan Inan

inanh@stanford.edu

Andres N¨otzli

noetzli@stanford.edu

1.

INTRODUCTION

In many cities, there is a small number of streets with a
lot of restaurants. Being in a street like this is a double-
edged sword for the individual restaurant. On one side, it
is valuable because it gets them the attention of potential
customers for free. On the other hand, the restaurants are
competing for customers with similar needs and the oﬀerings
are not free of overlap.

When a new business opens in a cluster, this delicate
balance between businesses is disturbed. The goal of this
project is to model the impact of a new business on the ex-
isting businesses. Our hypothesis is that the new business
has an impact on the perception of customers of existing
businesses. With increased competition, customers have to
reevaluate existing businesses taking into account the new
options. We use customer ratings as a proxy for the value
of a business and to observe this reevaluation.

Our project is not the ﬁrst one that is concerned with
the dynamics of clusters. There is a large corpus of existing
work [1, 3, 4], but to our knowledge no project considered
to study the interaction of two businesses in a cluster by
mining a large dataset

Main Objectives
We identify two main components of our machine learning
project:

1. Business Clustering

2. Impact of a new business on a cluster

• Selecting relevant features for use of the models
• Propose and test impact models
• Use machine learning techniques to predict the

impact

2. THE DATASET

Yelp is a website where users review businesses like restau-
rants. We use the Yelp data that has been released as part
of the Yelp Dataset Challenge 1. The dataset contains data
from several cities and there is a rich set of attributes for
each business.

• 42,153 businesses
• 320,002 business attributes

1http://www.yelp.com/dataset_challenge

• 31,617 check-in sets
• 252,898 users
• 403,210 tips
• 1,125,458 reviews

Because of the large number of reviews, most of the data
mining projects on this dataset are concerned with the text
of the reviews. To study the interaction between two busi-
nesses, however, we the two most interesting aspects are the
attributes of a business and the rating over time.

Two data points that are missing from the dataset are the
opening and the closing date of a business. To compensate
for the lack of information, we use a simple heuristic: We
assume that the business opened on the date of the ﬁrst com-
ment and we assume that it has been closed on the date of
the last comment if the last comment more than 2 months
older than the newest comment in the dataset. We argue
that this is a reasonable choice because our project requires
us to look at businesses with a reasonable number of rat-
ings and in these cases the opening/closing date should be
reasonably close to the date of the ﬁrst and the last review.
Also we believe ﬁrst review as the opening date is a good es-
timate for our models since this is the point where customers
have actually started rating the restaurant.

3. PREPROCESSING
3.1 Running average of ratings

The running average of ratings plays an important role
when predicting the correlation of two businesses. The raw
user ratings are highly noisy and relatively sparse. E.g.
many places are not visited often during the week, so there
are holes on week days. Figure 1 depicts an example of a
moving average using a Gaussian kernel for a business over
time. We chose 30 days as our moving average period so
it would track the reviews closely almost all the time for
each business and also its not too big and gives us a smooth
changing average over the time. In addition, we ﬁlter out
businesses with a low number of ratings.
3.2 Clustering

We checked diﬀerent clustering algorithms and for the
same number of clusters, K-Means based on the geographic
locations of businesses had the best result. The result of two
clustering algorithms results are shown in Figure 2. As we
can see DBSCAN is not giving a good result. Since in a city

1

Strength in numbers? Modelling the impact of businesses

on each other

Amir Abbas Sadeghian
amirabs@stanford.edu

Hakan Inan

inanh@stanford.edu

Andres N¨otzli

noetzli@stanford.edu

1.

INTRODUCTION

In many cities, there is a small number of streets with a
lot of restaurants. Being in a street like this is a double-
edged sword for the individual restaurant. On one side, it
is valuable because it gets them the attention of potential
customers for free. On the other hand, the restaurants are
competing for customers with similar needs and the oﬀerings
are not free of overlap.

When a new business opens in a cluster, this delicate
balance between businesses is disturbed. The goal of this
project is to model the impact of a new business on the ex-
isting businesses. Our hypothesis is that the new business
has an impact on the perception of customers of existing
businesses. With increased competition, customers have to
reevaluate existing businesses taking into account the new
options. We use customer ratings as a proxy for the value
of a business and to observe this reevaluation.

Our project is not the ﬁrst one that is concerned with
the dynamics of clusters. There is a large corpus of existing
work [1, 3, 4], but to our knowledge no project considered
to study the interaction of two businesses in a cluster by
mining a large dataset

Main Objectives
We identify two main components of our machine learning
project:

1. Business Clustering

2. Impact of a new business on a cluster

• Selecting relevant features for use of the models
• Propose and test impact models
• Use machine learning techniques to predict the

impact

2. THE DATASET

Yelp is a website where users review businesses like restau-
rants. We use the Yelp data that has been released as part
of the Yelp Dataset Challenge 1. The dataset contains data
from several cities and there is a rich set of attributes for
each business.

• 42,153 businesses
• 320,002 business attributes

1http://www.yelp.com/dataset_challenge

• 31,617 check-in sets
• 252,898 users
• 403,210 tips
• 1,125,458 reviews

Because of the large number of reviews, most of the data
mining projects on this dataset are concerned with the text
of the reviews. To study the interaction between two busi-
nesses, however, we the two most interesting aspects are the
attributes of a business and the rating over time.

Two data points that are missing from the dataset are the
opening and the closing date of a business. To compensate
for the lack of information, we use a simple heuristic: We
assume that the business opened on the date of the ﬁrst com-
ment and we assume that it has been closed on the date of
the last comment if the last comment more than 2 months
older than the newest comment in the dataset. We argue
that this is a reasonable choice because our project requires
us to look at businesses with a reasonable number of rat-
ings and in these cases the opening/closing date should be
reasonably close to the date of the ﬁrst and the last review.
Also we believe ﬁrst review as the opening date is a good es-
timate for our models since this is the point where customers
have actually started rating the restaurant.

3. PREPROCESSING
3.1 Running average of ratings

The running average of ratings plays an important role
when predicting the correlation of two businesses. The raw
user ratings are highly noisy and relatively sparse. E.g.
many places are not visited often during the week, so there
are holes on week days. Figure 1 depicts an example of a
moving average using a Gaussian kernel for a business over
time. We chose 30 days as our moving average period so
it would track the reviews closely almost all the time for
each business and also its not too big and gives us a smooth
changing average over the time. In addition, we ﬁlter out
businesses with a low number of ratings.
3.2 Clustering

We checked diﬀerent clustering algorithms and for the
same number of clusters, K-Means based on the geographic
locations of businesses had the best result. The result of two
clustering algorithms results are shown in Figure 2. As we
can see DBSCAN is not giving a good result. Since in a city

1

The ﬁrst feature vector that we considered, was constructed
as follows: The ﬁrst element is the geographical distance,
the second elelement is the diﬀerence in the price range and
every feature following the ﬁrst two elements is either 1 or
-1 and corresponds to an attribute in the dataset. Value
assignment of the features is as follows:

• 1: the two businesses have the same (if attribute is
discrete) or strongly overlapping (if the attribute is
continuous) values for the corresponding attribute

• -1: the two businesses have the diﬀerent (if attribute
is discrete) or non-overlapping (if the attribute is con-
tinuous) values for the corresponding attribute

The second set of features is similar to the ﬁrst one but
instead of considering the diﬀerence between the attributes
of the businesses, we concatenate the list of attributes from
the two businesses.

5. MODELS

All the analysis in the project was based on using the pair-
wise features outlined above for predicting pairwise metrics
to be deﬁned in what follows. Speciﬁcally, in this section we
introduce 4 diﬀerent metrics which we will henceforth call
”pairwise impact metrics”.

Before we move onto detailing the metrics, it is impor-
tant to note a one thing we have followed regardless of the
metric used: relating only businesses within a reasonable
distance. We have calculated all the metrics for pairs inside
the same cluster since our scope is restricted to businesses
that may have pairwise relationships due to their geograph-
ical closeness. This way, we hoped to eliminate the dom-
inance of relationships with more global causes, such as a
general increasing trend to prefer Mediterranean food over
Indian food, or frozen yogurt shops over ice-cream shops.
Conditional Mean Analysis

Figure 3: Example mean analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the mean of ratings of the businesses nearby.
Proxy : Calculate the mean ratings of the nearby businesses
before and after a new business opens, and get a compara-
tive metric.
Expected results : The change in the conditional means of
the existing businesses may be predicted using the attributes
of the existing businesses and the new business.

The mean ratings were calculated as follows:

(cid:80)

(cid:80)

Ebef ore(b) = 1
Rb

Eaf ter(b) = 1
Ra

x:−M +d0≤dx≤d0
x:d0≤dx≤d0+M rx(b)

rx(b),

Figure 1: Moving average of ratings for a speciﬁc
business

there are so many businesses acting like bridges that connect
two big clusters together. This is the main reason that in
the business clustering problem DBSCAN is not performing
as good as K-Means.

Figure 2: K-Means and DBSCAN clustering

As we previously described in the introduction, we are in-
terested to look at clusters of businesses. The ﬁrst step in
our project is thus to ﬁnd a good way of clustering busi-
nesses. We found that using zip codes to group businesses is
ineﬀective as groups of businesses often span zip code bound-
aries. We experimented with multiple clustering methods
and ended up using k-means clustering with the geographi-
cal location as features because we are interested to observe
interaction between businesses that are physically close to
each other. Using k-means we are taking the advantage
of clustering close businesses together and also putting far
businesses that are not inﬂuencing each other into diﬀerent
clusters. In this case we can assume that the businesses in
two diﬀerent clusters are independent, and only businesses
in one cluster inﬂuence each others behaviors. We will have
a brief overview on the diﬀerent clustering techniques used
and a benchmark that reasons which one works the best in
the case of our study.

4. FEATURES

Since the motivation is predicting the impact of the busi-
nesses within a cluster, it is natural to consider pairwise
metrics when constructing the features for the models. To
this end, we constructed features out of the pairwise com-
parison of the attributes of the businesses in the dataset.
Some of the business attributes in the dataset are:

• Geographical distance
• Type of the business: restaurant, lounge, etc.
• Price Range: $, $$, ...

We tried two diﬀerent sets of features. In both cases, we
assign a feature vector to each pair of businesses in a cluster.

2

4000420044004600480050005200Day012345Rating6040200204060Day012345RatingStrength in numbers? Modelling the impact of businesses

on each other

Amir Abbas Sadeghian
amirabs@stanford.edu

Hakan Inan

inanh@stanford.edu

Andres N¨otzli

noetzli@stanford.edu

1.

INTRODUCTION

In many cities, there is a small number of streets with a
lot of restaurants. Being in a street like this is a double-
edged sword for the individual restaurant. On one side, it
is valuable because it gets them the attention of potential
customers for free. On the other hand, the restaurants are
competing for customers with similar needs and the oﬀerings
are not free of overlap.

When a new business opens in a cluster, this delicate
balance between businesses is disturbed. The goal of this
project is to model the impact of a new business on the ex-
isting businesses. Our hypothesis is that the new business
has an impact on the perception of customers of existing
businesses. With increased competition, customers have to
reevaluate existing businesses taking into account the new
options. We use customer ratings as a proxy for the value
of a business and to observe this reevaluation.

Our project is not the ﬁrst one that is concerned with
the dynamics of clusters. There is a large corpus of existing
work [1, 3, 4], but to our knowledge no project considered
to study the interaction of two businesses in a cluster by
mining a large dataset

Main Objectives
We identify two main components of our machine learning
project:

1. Business Clustering

2. Impact of a new business on a cluster

• Selecting relevant features for use of the models
• Propose and test impact models
• Use machine learning techniques to predict the

impact

2. THE DATASET

Yelp is a website where users review businesses like restau-
rants. We use the Yelp data that has been released as part
of the Yelp Dataset Challenge 1. The dataset contains data
from several cities and there is a rich set of attributes for
each business.

• 42,153 businesses
• 320,002 business attributes

1http://www.yelp.com/dataset_challenge

• 31,617 check-in sets
• 252,898 users
• 403,210 tips
• 1,125,458 reviews

Because of the large number of reviews, most of the data
mining projects on this dataset are concerned with the text
of the reviews. To study the interaction between two busi-
nesses, however, we the two most interesting aspects are the
attributes of a business and the rating over time.

Two data points that are missing from the dataset are the
opening and the closing date of a business. To compensate
for the lack of information, we use a simple heuristic: We
assume that the business opened on the date of the ﬁrst com-
ment and we assume that it has been closed on the date of
the last comment if the last comment more than 2 months
older than the newest comment in the dataset. We argue
that this is a reasonable choice because our project requires
us to look at businesses with a reasonable number of rat-
ings and in these cases the opening/closing date should be
reasonably close to the date of the ﬁrst and the last review.
Also we believe ﬁrst review as the opening date is a good es-
timate for our models since this is the point where customers
have actually started rating the restaurant.

3. PREPROCESSING
3.1 Running average of ratings

The running average of ratings plays an important role
when predicting the correlation of two businesses. The raw
user ratings are highly noisy and relatively sparse. E.g.
many places are not visited often during the week, so there
are holes on week days. Figure 1 depicts an example of a
moving average using a Gaussian kernel for a business over
time. We chose 30 days as our moving average period so
it would track the reviews closely almost all the time for
each business and also its not too big and gives us a smooth
changing average over the time. In addition, we ﬁlter out
businesses with a low number of ratings.
3.2 Clustering

We checked diﬀerent clustering algorithms and for the
same number of clusters, K-Means based on the geographic
locations of businesses had the best result. The result of two
clustering algorithms results are shown in Figure 2. As we
can see DBSCAN is not giving a good result. Since in a city

1

The ﬁrst feature vector that we considered, was constructed
as follows: The ﬁrst element is the geographical distance,
the second elelement is the diﬀerence in the price range and
every feature following the ﬁrst two elements is either 1 or
-1 and corresponds to an attribute in the dataset. Value
assignment of the features is as follows:

• 1: the two businesses have the same (if attribute is
discrete) or strongly overlapping (if the attribute is
continuous) values for the corresponding attribute

• -1: the two businesses have the diﬀerent (if attribute
is discrete) or non-overlapping (if the attribute is con-
tinuous) values for the corresponding attribute

The second set of features is similar to the ﬁrst one but
instead of considering the diﬀerence between the attributes
of the businesses, we concatenate the list of attributes from
the two businesses.

5. MODELS

All the analysis in the project was based on using the pair-
wise features outlined above for predicting pairwise metrics
to be deﬁned in what follows. Speciﬁcally, in this section we
introduce 4 diﬀerent metrics which we will henceforth call
”pairwise impact metrics”.

Before we move onto detailing the metrics, it is impor-
tant to note a one thing we have followed regardless of the
metric used: relating only businesses within a reasonable
distance. We have calculated all the metrics for pairs inside
the same cluster since our scope is restricted to businesses
that may have pairwise relationships due to their geograph-
ical closeness. This way, we hoped to eliminate the dom-
inance of relationships with more global causes, such as a
general increasing trend to prefer Mediterranean food over
Indian food, or frozen yogurt shops over ice-cream shops.
Conditional Mean Analysis

Figure 3: Example mean analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the mean of ratings of the businesses nearby.
Proxy : Calculate the mean ratings of the nearby businesses
before and after a new business opens, and get a compara-
tive metric.
Expected results : The change in the conditional means of
the existing businesses may be predicted using the attributes
of the existing businesses and the new business.

The mean ratings were calculated as follows:

(cid:80)

(cid:80)

Ebef ore(b) = 1
Rb

Eaf ter(b) = 1
Ra

x:−M +d0≤dx≤d0
x:d0≤dx≤d0+M rx(b)

rx(b),

Figure 1: Moving average of ratings for a speciﬁc
business

there are so many businesses acting like bridges that connect
two big clusters together. This is the main reason that in
the business clustering problem DBSCAN is not performing
as good as K-Means.

Figure 2: K-Means and DBSCAN clustering

As we previously described in the introduction, we are in-
terested to look at clusters of businesses. The ﬁrst step in
our project is thus to ﬁnd a good way of clustering busi-
nesses. We found that using zip codes to group businesses is
ineﬀective as groups of businesses often span zip code bound-
aries. We experimented with multiple clustering methods
and ended up using k-means clustering with the geographi-
cal location as features because we are interested to observe
interaction between businesses that are physically close to
each other. Using k-means we are taking the advantage
of clustering close businesses together and also putting far
businesses that are not inﬂuencing each other into diﬀerent
clusters. In this case we can assume that the businesses in
two diﬀerent clusters are independent, and only businesses
in one cluster inﬂuence each others behaviors. We will have
a brief overview on the diﬀerent clustering techniques used
and a benchmark that reasons which one works the best in
the case of our study.

4. FEATURES

Since the motivation is predicting the impact of the busi-
nesses within a cluster, it is natural to consider pairwise
metrics when constructing the features for the models. To
this end, we constructed features out of the pairwise com-
parison of the attributes of the businesses in the dataset.
Some of the business attributes in the dataset are:

• Geographical distance
• Type of the business: restaurant, lounge, etc.
• Price Range: $, $$, ...

We tried two diﬀerent sets of features. In both cases, we
assign a feature vector to each pair of businesses in a cluster.

2

4000420044004600480050005200Day012345Rating6040200204060Day012345Ratingdx = day of the review x ,
d0 = opening day of the new business,
rx = rating of review x,
M = number of days to average over

For this analysis, we needed a date of opening for the
businesses. However, we didn’t have the true opening dates
in the dataset, and we estimated them to be the dates of
the ﬁrst review for the businesses.
The pairwise impact metric in the conditional mean analysis
was determined as Ebef ore − Eaf ter.

Trend Analysis

Figure 4: Example trend analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the trends of ratings of the businesses nearby.
Proxy : Fit separate lines for the ratings of a business both
before and after a new business opens in the neighborhood.
Calculate a metric based on the diﬀerence in the slopes of
the two lines.
Expected results : The change in the trends of the existing
businesses with respect to the launching of a new business
in the neighborhood may be predicted using the attributes
of the existing businesses and the new business.

First, we estimated the opening date of the businesses as
explained in the previous subsection. Then, for each pair
of businesses we ﬁt two lines for the ratings of the older
business around the origin (the estimated opening date of
the newer business) within a speciﬁed time window, impos-
ing that the lines touch at the origin . Speciﬁcally, we are
solving the following least squares problem:

(cid:20) xbef ore

0

xaf ter

0

1
1

(cid:21) s1

s2
c

 =

(cid:20) ybef ore

yaf ter

(cid:21)

,

where xbef ore (xaf ter) is a vector of the days of ﬁltered rat-
ings of the older business before (after) the newer business
opens, ybef ore (yaf ter) is a vector of ﬁltered ratings of the
older business before (after) the newer business opens, s1
(s2) is the slope of the line ﬁtted to the ratings of the older
business before (after) the newer business opens, and c is the
common intercept for the two lines. One thing to note here
is that the elements of xbef ore and xaf ter are shifted such
that the last element of xbef ore is 0 and the ﬁrst element of
xaf ter is 1.

The pairwise impact metric was determined to be the dif-

ference in the angles of the two slopes.

Figure 5: Example general trend analysis for a pair
of businesses

General Trend Analysis
Hypothesis : The exact opening date is not known and
since prediction is noisy, the trend analysis might fail. The
general trends of the existing businesses around a rough es-
timate of the opening time of a new business may reﬂect
(with less noise compared to the trend analysis) the impact
of the new business on them.
Proxy : Fit a single line for the ratings of a business around
the estimated opening date of a newly opened business in
the neighborhood. Determine if the business has an increas-
ing or a decreasing trend based on the slope of the line.
Expected results : The general trends of the existing busi-
nesses around the launching date of a new business in the
neighborhood may be predicted using the attributes of the
existing businesses and the new business.

The method to apply was very similar to that for the trend
analysis, with the distinction being that for general trend
analysis we ﬁtted a single line for the whole time window
and calculated a single slope. Mathematically, we calculated
the least square solution to the following equation:

(cid:20) xbef ore

(cid:21)(cid:20) s

(cid:21)

xaf ter

c

(cid:20) ybef ore

yaf ter

(cid:21)

,

=

with everything except for s is as deﬁned in the previous
subsection. s is the slope to the ﬁtted line for the whole
time window .

The pairwise impact metric in general trend analysis was

determined to be the slope of the ﬁtted line(s).
Correlation Analysis
The correlation coeﬃcient is a measure of linear associa-
tion between two variables. A high positive correlation in-
dicates that two variables are perfectly related in a positive
linear sense, and a high negative correlation indicates that
two variables are perfectly related in a negative linear sense.
And zero means that they are not related at all. This show
that studying the business correlation give us a very good
intuition on how businesses are eﬀecting each other.

Figure 6: Example of correlation analysis for a pair
of businesses

Hypothesis :The correlation between the time-series of
average star ratings between businesses may serve as a low

3

6040200204060Day012345Rating6040200204060Day012345Rating460046204640466046804700Day012345RatingStrength in numbers? Modelling the impact of businesses

on each other

Amir Abbas Sadeghian
amirabs@stanford.edu

Hakan Inan

inanh@stanford.edu

Andres N¨otzli

noetzli@stanford.edu

1.

INTRODUCTION

In many cities, there is a small number of streets with a
lot of restaurants. Being in a street like this is a double-
edged sword for the individual restaurant. On one side, it
is valuable because it gets them the attention of potential
customers for free. On the other hand, the restaurants are
competing for customers with similar needs and the oﬀerings
are not free of overlap.

When a new business opens in a cluster, this delicate
balance between businesses is disturbed. The goal of this
project is to model the impact of a new business on the ex-
isting businesses. Our hypothesis is that the new business
has an impact on the perception of customers of existing
businesses. With increased competition, customers have to
reevaluate existing businesses taking into account the new
options. We use customer ratings as a proxy for the value
of a business and to observe this reevaluation.

Our project is not the ﬁrst one that is concerned with
the dynamics of clusters. There is a large corpus of existing
work [1, 3, 4], but to our knowledge no project considered
to study the interaction of two businesses in a cluster by
mining a large dataset

Main Objectives
We identify two main components of our machine learning
project:

1. Business Clustering

2. Impact of a new business on a cluster

• Selecting relevant features for use of the models
• Propose and test impact models
• Use machine learning techniques to predict the

impact

2. THE DATASET

Yelp is a website where users review businesses like restau-
rants. We use the Yelp data that has been released as part
of the Yelp Dataset Challenge 1. The dataset contains data
from several cities and there is a rich set of attributes for
each business.

• 42,153 businesses
• 320,002 business attributes

1http://www.yelp.com/dataset_challenge

• 31,617 check-in sets
• 252,898 users
• 403,210 tips
• 1,125,458 reviews

Because of the large number of reviews, most of the data
mining projects on this dataset are concerned with the text
of the reviews. To study the interaction between two busi-
nesses, however, we the two most interesting aspects are the
attributes of a business and the rating over time.

Two data points that are missing from the dataset are the
opening and the closing date of a business. To compensate
for the lack of information, we use a simple heuristic: We
assume that the business opened on the date of the ﬁrst com-
ment and we assume that it has been closed on the date of
the last comment if the last comment more than 2 months
older than the newest comment in the dataset. We argue
that this is a reasonable choice because our project requires
us to look at businesses with a reasonable number of rat-
ings and in these cases the opening/closing date should be
reasonably close to the date of the ﬁrst and the last review.
Also we believe ﬁrst review as the opening date is a good es-
timate for our models since this is the point where customers
have actually started rating the restaurant.

3. PREPROCESSING
3.1 Running average of ratings

The running average of ratings plays an important role
when predicting the correlation of two businesses. The raw
user ratings are highly noisy and relatively sparse. E.g.
many places are not visited often during the week, so there
are holes on week days. Figure 1 depicts an example of a
moving average using a Gaussian kernel for a business over
time. We chose 30 days as our moving average period so
it would track the reviews closely almost all the time for
each business and also its not too big and gives us a smooth
changing average over the time. In addition, we ﬁlter out
businesses with a low number of ratings.
3.2 Clustering

We checked diﬀerent clustering algorithms and for the
same number of clusters, K-Means based on the geographic
locations of businesses had the best result. The result of two
clustering algorithms results are shown in Figure 2. As we
can see DBSCAN is not giving a good result. Since in a city

1

The ﬁrst feature vector that we considered, was constructed
as follows: The ﬁrst element is the geographical distance,
the second elelement is the diﬀerence in the price range and
every feature following the ﬁrst two elements is either 1 or
-1 and corresponds to an attribute in the dataset. Value
assignment of the features is as follows:

• 1: the two businesses have the same (if attribute is
discrete) or strongly overlapping (if the attribute is
continuous) values for the corresponding attribute

• -1: the two businesses have the diﬀerent (if attribute
is discrete) or non-overlapping (if the attribute is con-
tinuous) values for the corresponding attribute

The second set of features is similar to the ﬁrst one but
instead of considering the diﬀerence between the attributes
of the businesses, we concatenate the list of attributes from
the two businesses.

5. MODELS

All the analysis in the project was based on using the pair-
wise features outlined above for predicting pairwise metrics
to be deﬁned in what follows. Speciﬁcally, in this section we
introduce 4 diﬀerent metrics which we will henceforth call
”pairwise impact metrics”.

Before we move onto detailing the metrics, it is impor-
tant to note a one thing we have followed regardless of the
metric used: relating only businesses within a reasonable
distance. We have calculated all the metrics for pairs inside
the same cluster since our scope is restricted to businesses
that may have pairwise relationships due to their geograph-
ical closeness. This way, we hoped to eliminate the dom-
inance of relationships with more global causes, such as a
general increasing trend to prefer Mediterranean food over
Indian food, or frozen yogurt shops over ice-cream shops.
Conditional Mean Analysis

Figure 3: Example mean analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the mean of ratings of the businesses nearby.
Proxy : Calculate the mean ratings of the nearby businesses
before and after a new business opens, and get a compara-
tive metric.
Expected results : The change in the conditional means of
the existing businesses may be predicted using the attributes
of the existing businesses and the new business.

The mean ratings were calculated as follows:

(cid:80)

(cid:80)

Ebef ore(b) = 1
Rb

Eaf ter(b) = 1
Ra

x:−M +d0≤dx≤d0
x:d0≤dx≤d0+M rx(b)

rx(b),

Figure 1: Moving average of ratings for a speciﬁc
business

there are so many businesses acting like bridges that connect
two big clusters together. This is the main reason that in
the business clustering problem DBSCAN is not performing
as good as K-Means.

Figure 2: K-Means and DBSCAN clustering

As we previously described in the introduction, we are in-
terested to look at clusters of businesses. The ﬁrst step in
our project is thus to ﬁnd a good way of clustering busi-
nesses. We found that using zip codes to group businesses is
ineﬀective as groups of businesses often span zip code bound-
aries. We experimented with multiple clustering methods
and ended up using k-means clustering with the geographi-
cal location as features because we are interested to observe
interaction between businesses that are physically close to
each other. Using k-means we are taking the advantage
of clustering close businesses together and also putting far
businesses that are not inﬂuencing each other into diﬀerent
clusters. In this case we can assume that the businesses in
two diﬀerent clusters are independent, and only businesses
in one cluster inﬂuence each others behaviors. We will have
a brief overview on the diﬀerent clustering techniques used
and a benchmark that reasons which one works the best in
the case of our study.

4. FEATURES

Since the motivation is predicting the impact of the busi-
nesses within a cluster, it is natural to consider pairwise
metrics when constructing the features for the models. To
this end, we constructed features out of the pairwise com-
parison of the attributes of the businesses in the dataset.
Some of the business attributes in the dataset are:

• Geographical distance
• Type of the business: restaurant, lounge, etc.
• Price Range: $, $$, ...

We tried two diﬀerent sets of features. In both cases, we
assign a feature vector to each pair of businesses in a cluster.

2

4000420044004600480050005200Day012345Rating6040200204060Day012345Ratingdx = day of the review x ,
d0 = opening day of the new business,
rx = rating of review x,
M = number of days to average over

For this analysis, we needed a date of opening for the
businesses. However, we didn’t have the true opening dates
in the dataset, and we estimated them to be the dates of
the ﬁrst review for the businesses.
The pairwise impact metric in the conditional mean analysis
was determined as Ebef ore − Eaf ter.

Trend Analysis

Figure 4: Example trend analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the trends of ratings of the businesses nearby.
Proxy : Fit separate lines for the ratings of a business both
before and after a new business opens in the neighborhood.
Calculate a metric based on the diﬀerence in the slopes of
the two lines.
Expected results : The change in the trends of the existing
businesses with respect to the launching of a new business
in the neighborhood may be predicted using the attributes
of the existing businesses and the new business.

First, we estimated the opening date of the businesses as
explained in the previous subsection. Then, for each pair
of businesses we ﬁt two lines for the ratings of the older
business around the origin (the estimated opening date of
the newer business) within a speciﬁed time window, impos-
ing that the lines touch at the origin . Speciﬁcally, we are
solving the following least squares problem:

(cid:20) xbef ore

0

xaf ter

0

1
1

(cid:21) s1

s2
c

 =

(cid:20) ybef ore

yaf ter

(cid:21)

,

where xbef ore (xaf ter) is a vector of the days of ﬁltered rat-
ings of the older business before (after) the newer business
opens, ybef ore (yaf ter) is a vector of ﬁltered ratings of the
older business before (after) the newer business opens, s1
(s2) is the slope of the line ﬁtted to the ratings of the older
business before (after) the newer business opens, and c is the
common intercept for the two lines. One thing to note here
is that the elements of xbef ore and xaf ter are shifted such
that the last element of xbef ore is 0 and the ﬁrst element of
xaf ter is 1.

The pairwise impact metric was determined to be the dif-

ference in the angles of the two slopes.

Figure 5: Example general trend analysis for a pair
of businesses

General Trend Analysis
Hypothesis : The exact opening date is not known and
since prediction is noisy, the trend analysis might fail. The
general trends of the existing businesses around a rough es-
timate of the opening time of a new business may reﬂect
(with less noise compared to the trend analysis) the impact
of the new business on them.
Proxy : Fit a single line for the ratings of a business around
the estimated opening date of a newly opened business in
the neighborhood. Determine if the business has an increas-
ing or a decreasing trend based on the slope of the line.
Expected results : The general trends of the existing busi-
nesses around the launching date of a new business in the
neighborhood may be predicted using the attributes of the
existing businesses and the new business.

The method to apply was very similar to that for the trend
analysis, with the distinction being that for general trend
analysis we ﬁtted a single line for the whole time window
and calculated a single slope. Mathematically, we calculated
the least square solution to the following equation:

(cid:20) xbef ore

(cid:21)(cid:20) s

(cid:21)

xaf ter

c

(cid:20) ybef ore

yaf ter

(cid:21)

,

=

with everything except for s is as deﬁned in the previous
subsection. s is the slope to the ﬁtted line for the whole
time window .

The pairwise impact metric in general trend analysis was

determined to be the slope of the ﬁtted line(s).
Correlation Analysis
The correlation coeﬃcient is a measure of linear associa-
tion between two variables. A high positive correlation in-
dicates that two variables are perfectly related in a positive
linear sense, and a high negative correlation indicates that
two variables are perfectly related in a negative linear sense.
And zero means that they are not related at all. This show
that studying the business correlation give us a very good
intuition on how businesses are eﬀecting each other.

Figure 6: Example of correlation analysis for a pair
of businesses

Hypothesis :The correlation between the time-series of
average star ratings between businesses may serve as a low

3

6040200204060Day012345Rating6040200204060Day012345Rating460046204640466046804700Day012345Ratingsig/insig classif.

pos/neg classif.

60 days

90 days

60 days

90 days

Conditional Mean

Trend Analysis

SVM rbf
Logistic Regression

0.84/0.61
0.61/0.52

0.82/0.60
0.60/0.52

0.84/0.60
0.56/0.49

0.85/0.65
0.56/0.49

SVM rbf
Logistic Regression

0.83/0.62
0.60/0.55

0.82/0.59
0.58/0.48

0.84/0.60
0.57/0.49

0.81/0.58
0.56/0.51

General Trend Analysis

SVM rbf
Logistic Regression

0.84/0.62
0.59/0.52

0.80/0.62
0.58/0.54

0.81/0.60
0.57/0.49

0.83/0.63
0.58/0.49

Correlation Analysis

SVM rbf
Logistic Regression

0.85/0.81
0.84/0.82

0.86/0.81
0.86/0.83

Table 1: Training and 10-fold cross-validation score for predictions

The pairwise impact metric was determined to be the cor-

relation coeﬃcient.

6. RESULTS

The main tools for our study was Python to preprocess
and analyze the data and the Scikit package [2] to perform
the machine learning tasks. We found that the previously
presented two sets of features performed very similarly. This
indicates that the diﬀerence in attributes gives us enough
information for the predictions that we studied. Thus, we
are only presenting the results for the ﬁrst feature set.

We did two types of experiments: (a) classiﬁcation of pos-
itive vs. negative values for all the metrics and (b) classiﬁ-
cation of signiﬁcant vs. insigniﬁcant values (absolute value
bigger than a certain threshold) for all models. Convert-
ing the metrics to binary features was exacly the same for
all the metrics due to their conceptual correspondance. We
also adjusted the thresholds to have an even distribution of
the class labels in order to avoid bias in the classiﬁcation
accuracy.

For every model except correlation analysis, we also con-
sidered diﬀerent lengths of periods to ﬁt the model. We
found that there were only minor diﬀerences between a pe-
riod of 60 days and 90 days.

Table 1 contains the mean training score and the 10-fold
cross-validation score for predictions in a single cluster. We
used support vector classiﬁer (SVM) with C = 1 and a Gaus-
sian kernel and logistic regression with l1-norm regulariza-
tion for all the tests. The cluster consists of 147 businesses
which corresponds to 10730 pairings.

We also collected results for linear, polynomial and sig-
moid kernels for SVM classiﬁer but we omitted them here
due to their poor performance.

7. DISCUSSION

Out of the 4 diﬀerent pairwise impact metrics that we
have made eﬀort to predict, we were most successful with
the correlation metric (> 80% CV accuracy with both classi-
ﬁers for both classiﬁcation experiments). One thing that we
have noted is that SVM performed signiﬁcantly superior to
logistic regression for the conditional mean analysis, trend
analysis, and general trend analysis, whereas it was outper-
formed slightly in the correlation analysis. We have spec-
ulated that this might be due to possible eﬀective ”noise”
level from the ﬁrst 3 metrics being signiﬁcantly higher than

Figure 7: Correlation between ratings of 41 busi-
nesses in an example cluster

noise (as compared to metrics discussed above) metric as it
reﬂects a pairwise relationship over a long period of time.
Proxy : Compute the correlation of ratings over time.
Expected results : The correlation can be predicted using
the attributes of the businesses within reasonable distance.
After choosing one cluster, we analyzed the correlation of
ratings between diﬀerent businesses inside the cluster. To
do so, we ﬁrst applied a Gaussian ﬁlter to the time series of
ratings to smooth out local ﬂuctuations in ratings. The cor-
relation coeﬃcient between the ratings were then calculated
as:

E(XY )

(cid:112)E(X 2)E(Y 2)
n(cid:88)

rt

t=0

ρXY =

E(X) =

1
n

Where rt is the ﬁltered rating. In this step we discarded
all businesses with a low number of ratings because they
potentially would not provide not enough signal to get a
good estimate for the correlation.

As Figure 7 shows, there are a quite a few cases with

strong correlation.

4

Strength in numbers? Modelling the impact of businesses

on each other

Amir Abbas Sadeghian
amirabs@stanford.edu

Hakan Inan

inanh@stanford.edu

Andres N¨otzli

noetzli@stanford.edu

1.

INTRODUCTION

In many cities, there is a small number of streets with a
lot of restaurants. Being in a street like this is a double-
edged sword for the individual restaurant. On one side, it
is valuable because it gets them the attention of potential
customers for free. On the other hand, the restaurants are
competing for customers with similar needs and the oﬀerings
are not free of overlap.

When a new business opens in a cluster, this delicate
balance between businesses is disturbed. The goal of this
project is to model the impact of a new business on the ex-
isting businesses. Our hypothesis is that the new business
has an impact on the perception of customers of existing
businesses. With increased competition, customers have to
reevaluate existing businesses taking into account the new
options. We use customer ratings as a proxy for the value
of a business and to observe this reevaluation.

Our project is not the ﬁrst one that is concerned with
the dynamics of clusters. There is a large corpus of existing
work [1, 3, 4], but to our knowledge no project considered
to study the interaction of two businesses in a cluster by
mining a large dataset

Main Objectives
We identify two main components of our machine learning
project:

1. Business Clustering

2. Impact of a new business on a cluster

• Selecting relevant features for use of the models
• Propose and test impact models
• Use machine learning techniques to predict the

impact

2. THE DATASET

Yelp is a website where users review businesses like restau-
rants. We use the Yelp data that has been released as part
of the Yelp Dataset Challenge 1. The dataset contains data
from several cities and there is a rich set of attributes for
each business.

• 42,153 businesses
• 320,002 business attributes

1http://www.yelp.com/dataset_challenge

• 31,617 check-in sets
• 252,898 users
• 403,210 tips
• 1,125,458 reviews

Because of the large number of reviews, most of the data
mining projects on this dataset are concerned with the text
of the reviews. To study the interaction between two busi-
nesses, however, we the two most interesting aspects are the
attributes of a business and the rating over time.

Two data points that are missing from the dataset are the
opening and the closing date of a business. To compensate
for the lack of information, we use a simple heuristic: We
assume that the business opened on the date of the ﬁrst com-
ment and we assume that it has been closed on the date of
the last comment if the last comment more than 2 months
older than the newest comment in the dataset. We argue
that this is a reasonable choice because our project requires
us to look at businesses with a reasonable number of rat-
ings and in these cases the opening/closing date should be
reasonably close to the date of the ﬁrst and the last review.
Also we believe ﬁrst review as the opening date is a good es-
timate for our models since this is the point where customers
have actually started rating the restaurant.

3. PREPROCESSING
3.1 Running average of ratings

The running average of ratings plays an important role
when predicting the correlation of two businesses. The raw
user ratings are highly noisy and relatively sparse. E.g.
many places are not visited often during the week, so there
are holes on week days. Figure 1 depicts an example of a
moving average using a Gaussian kernel for a business over
time. We chose 30 days as our moving average period so
it would track the reviews closely almost all the time for
each business and also its not too big and gives us a smooth
changing average over the time. In addition, we ﬁlter out
businesses with a low number of ratings.
3.2 Clustering

We checked diﬀerent clustering algorithms and for the
same number of clusters, K-Means based on the geographic
locations of businesses had the best result. The result of two
clustering algorithms results are shown in Figure 2. As we
can see DBSCAN is not giving a good result. Since in a city

1

The ﬁrst feature vector that we considered, was constructed
as follows: The ﬁrst element is the geographical distance,
the second elelement is the diﬀerence in the price range and
every feature following the ﬁrst two elements is either 1 or
-1 and corresponds to an attribute in the dataset. Value
assignment of the features is as follows:

• 1: the two businesses have the same (if attribute is
discrete) or strongly overlapping (if the attribute is
continuous) values for the corresponding attribute

• -1: the two businesses have the diﬀerent (if attribute
is discrete) or non-overlapping (if the attribute is con-
tinuous) values for the corresponding attribute

The second set of features is similar to the ﬁrst one but
instead of considering the diﬀerence between the attributes
of the businesses, we concatenate the list of attributes from
the two businesses.

5. MODELS

All the analysis in the project was based on using the pair-
wise features outlined above for predicting pairwise metrics
to be deﬁned in what follows. Speciﬁcally, in this section we
introduce 4 diﬀerent metrics which we will henceforth call
”pairwise impact metrics”.

Before we move onto detailing the metrics, it is impor-
tant to note a one thing we have followed regardless of the
metric used: relating only businesses within a reasonable
distance. We have calculated all the metrics for pairs inside
the same cluster since our scope is restricted to businesses
that may have pairwise relationships due to their geograph-
ical closeness. This way, we hoped to eliminate the dom-
inance of relationships with more global causes, such as a
general increasing trend to prefer Mediterranean food over
Indian food, or frozen yogurt shops over ice-cream shops.
Conditional Mean Analysis

Figure 3: Example mean analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the mean of ratings of the businesses nearby.
Proxy : Calculate the mean ratings of the nearby businesses
before and after a new business opens, and get a compara-
tive metric.
Expected results : The change in the conditional means of
the existing businesses may be predicted using the attributes
of the existing businesses and the new business.

The mean ratings were calculated as follows:

(cid:80)

(cid:80)

Ebef ore(b) = 1
Rb

Eaf ter(b) = 1
Ra

x:−M +d0≤dx≤d0
x:d0≤dx≤d0+M rx(b)

rx(b),

Figure 1: Moving average of ratings for a speciﬁc
business

there are so many businesses acting like bridges that connect
two big clusters together. This is the main reason that in
the business clustering problem DBSCAN is not performing
as good as K-Means.

Figure 2: K-Means and DBSCAN clustering

As we previously described in the introduction, we are in-
terested to look at clusters of businesses. The ﬁrst step in
our project is thus to ﬁnd a good way of clustering busi-
nesses. We found that using zip codes to group businesses is
ineﬀective as groups of businesses often span zip code bound-
aries. We experimented with multiple clustering methods
and ended up using k-means clustering with the geographi-
cal location as features because we are interested to observe
interaction between businesses that are physically close to
each other. Using k-means we are taking the advantage
of clustering close businesses together and also putting far
businesses that are not inﬂuencing each other into diﬀerent
clusters. In this case we can assume that the businesses in
two diﬀerent clusters are independent, and only businesses
in one cluster inﬂuence each others behaviors. We will have
a brief overview on the diﬀerent clustering techniques used
and a benchmark that reasons which one works the best in
the case of our study.

4. FEATURES

Since the motivation is predicting the impact of the busi-
nesses within a cluster, it is natural to consider pairwise
metrics when constructing the features for the models. To
this end, we constructed features out of the pairwise com-
parison of the attributes of the businesses in the dataset.
Some of the business attributes in the dataset are:

• Geographical distance
• Type of the business: restaurant, lounge, etc.
• Price Range: $, $$, ...

We tried two diﬀerent sets of features. In both cases, we
assign a feature vector to each pair of businesses in a cluster.

2

4000420044004600480050005200Day012345Rating6040200204060Day012345Ratingdx = day of the review x ,
d0 = opening day of the new business,
rx = rating of review x,
M = number of days to average over

For this analysis, we needed a date of opening for the
businesses. However, we didn’t have the true opening dates
in the dataset, and we estimated them to be the dates of
the ﬁrst review for the businesses.
The pairwise impact metric in the conditional mean analysis
was determined as Ebef ore − Eaf ter.

Trend Analysis

Figure 4: Example trend analysis for a pair of busi-
nesses

Hypothesis : Opening of a new business has an impact

on the trends of ratings of the businesses nearby.
Proxy : Fit separate lines for the ratings of a business both
before and after a new business opens in the neighborhood.
Calculate a metric based on the diﬀerence in the slopes of
the two lines.
Expected results : The change in the trends of the existing
businesses with respect to the launching of a new business
in the neighborhood may be predicted using the attributes
of the existing businesses and the new business.

First, we estimated the opening date of the businesses as
explained in the previous subsection. Then, for each pair
of businesses we ﬁt two lines for the ratings of the older
business around the origin (the estimated opening date of
the newer business) within a speciﬁed time window, impos-
ing that the lines touch at the origin . Speciﬁcally, we are
solving the following least squares problem:

(cid:20) xbef ore

0

xaf ter

0

1
1

(cid:21) s1

s2
c

 =

(cid:20) ybef ore

yaf ter

(cid:21)

,

where xbef ore (xaf ter) is a vector of the days of ﬁltered rat-
ings of the older business before (after) the newer business
opens, ybef ore (yaf ter) is a vector of ﬁltered ratings of the
older business before (after) the newer business opens, s1
(s2) is the slope of the line ﬁtted to the ratings of the older
business before (after) the newer business opens, and c is the
common intercept for the two lines. One thing to note here
is that the elements of xbef ore and xaf ter are shifted such
that the last element of xbef ore is 0 and the ﬁrst element of
xaf ter is 1.

The pairwise impact metric was determined to be the dif-

ference in the angles of the two slopes.

Figure 5: Example general trend analysis for a pair
of businesses

General Trend Analysis
Hypothesis : The exact opening date is not known and
since prediction is noisy, the trend analysis might fail. The
general trends of the existing businesses around a rough es-
timate of the opening time of a new business may reﬂect
(with less noise compared to the trend analysis) the impact
of the new business on them.
Proxy : Fit a single line for the ratings of a business around
the estimated opening date of a newly opened business in
the neighborhood. Determine if the business has an increas-
ing or a decreasing trend based on the slope of the line.
Expected results : The general trends of the existing busi-
nesses around the launching date of a new business in the
neighborhood may be predicted using the attributes of the
existing businesses and the new business.

The method to apply was very similar to that for the trend
analysis, with the distinction being that for general trend
analysis we ﬁtted a single line for the whole time window
and calculated a single slope. Mathematically, we calculated
the least square solution to the following equation:

(cid:20) xbef ore

(cid:21)(cid:20) s

(cid:21)

xaf ter

c

(cid:20) ybef ore

yaf ter

(cid:21)

,

=

with everything except for s is as deﬁned in the previous
subsection. s is the slope to the ﬁtted line for the whole
time window .

The pairwise impact metric in general trend analysis was

determined to be the slope of the ﬁtted line(s).
Correlation Analysis
The correlation coeﬃcient is a measure of linear associa-
tion between two variables. A high positive correlation in-
dicates that two variables are perfectly related in a positive
linear sense, and a high negative correlation indicates that
two variables are perfectly related in a negative linear sense.
And zero means that they are not related at all. This show
that studying the business correlation give us a very good
intuition on how businesses are eﬀecting each other.

Figure 6: Example of correlation analysis for a pair
of businesses

Hypothesis :The correlation between the time-series of
average star ratings between businesses may serve as a low

3

6040200204060Day012345Rating6040200204060Day012345Rating460046204640466046804700Day012345Ratingsig/insig classif.

pos/neg classif.

60 days

90 days

60 days

90 days

Conditional Mean

Trend Analysis

SVM rbf
Logistic Regression

0.84/0.61
0.61/0.52

0.82/0.60
0.60/0.52

0.84/0.60
0.56/0.49

0.85/0.65
0.56/0.49

SVM rbf
Logistic Regression

0.83/0.62
0.60/0.55

0.82/0.59
0.58/0.48

0.84/0.60
0.57/0.49

0.81/0.58
0.56/0.51

General Trend Analysis

SVM rbf
Logistic Regression

0.84/0.62
0.59/0.52

0.80/0.62
0.58/0.54

0.81/0.60
0.57/0.49

0.83/0.63
0.58/0.49

Correlation Analysis

SVM rbf
Logistic Regression

0.85/0.81
0.84/0.82

0.86/0.81
0.86/0.83

Table 1: Training and 10-fold cross-validation score for predictions

The pairwise impact metric was determined to be the cor-

relation coeﬃcient.

6. RESULTS

The main tools for our study was Python to preprocess
and analyze the data and the Scikit package [2] to perform
the machine learning tasks. We found that the previously
presented two sets of features performed very similarly. This
indicates that the diﬀerence in attributes gives us enough
information for the predictions that we studied. Thus, we
are only presenting the results for the ﬁrst feature set.

We did two types of experiments: (a) classiﬁcation of pos-
itive vs. negative values for all the metrics and (b) classiﬁ-
cation of signiﬁcant vs. insigniﬁcant values (absolute value
bigger than a certain threshold) for all models. Convert-
ing the metrics to binary features was exacly the same for
all the metrics due to their conceptual correspondance. We
also adjusted the thresholds to have an even distribution of
the class labels in order to avoid bias in the classiﬁcation
accuracy.

For every model except correlation analysis, we also con-
sidered diﬀerent lengths of periods to ﬁt the model. We
found that there were only minor diﬀerences between a pe-
riod of 60 days and 90 days.

Table 1 contains the mean training score and the 10-fold
cross-validation score for predictions in a single cluster. We
used support vector classiﬁer (SVM) with C = 1 and a Gaus-
sian kernel and logistic regression with l1-norm regulariza-
tion for all the tests. The cluster consists of 147 businesses
which corresponds to 10730 pairings.

We also collected results for linear, polynomial and sig-
moid kernels for SVM classiﬁer but we omitted them here
due to their poor performance.

7. DISCUSSION

Out of the 4 diﬀerent pairwise impact metrics that we
have made eﬀort to predict, we were most successful with
the correlation metric (> 80% CV accuracy with both classi-
ﬁers for both classiﬁcation experiments). One thing that we
have noted is that SVM performed signiﬁcantly superior to
logistic regression for the conditional mean analysis, trend
analysis, and general trend analysis, whereas it was outper-
formed slightly in the correlation analysis. We have spec-
ulated that this might be due to possible eﬀective ”noise”
level from the ﬁrst 3 metrics being signiﬁcantly higher than

Figure 7: Correlation between ratings of 41 busi-
nesses in an example cluster

noise (as compared to metrics discussed above) metric as it
reﬂects a pairwise relationship over a long period of time.
Proxy : Compute the correlation of ratings over time.
Expected results : The correlation can be predicted using
the attributes of the businesses within reasonable distance.
After choosing one cluster, we analyzed the correlation of
ratings between diﬀerent businesses inside the cluster. To
do so, we ﬁrst applied a Gaussian ﬁlter to the time series of
ratings to smooth out local ﬂuctuations in ratings. The cor-
relation coeﬃcient between the ratings were then calculated
as:

E(XY )

(cid:112)E(X 2)E(Y 2)
n(cid:88)

rt

t=0

ρXY =

E(X) =

1
n

Where rt is the ﬁltered rating. In this step we discarded
all businesses with a low number of ratings because they
potentially would not provide not enough signal to get a
good estimate for the correlation.

As Figure 7 shows, there are a quite a few cases with

strong correlation.

4

whether a cluster is heterogeneous (for example the Great
Mall).
Since we have used very common business attributes like ge-
ographic distance, open hours, business types, and similar
common features for our studies, we have the advantage to
do the same experiments on similar datasets. In the future,
it would be interesting to see if similar or even better ob-
servations can be made on diﬀerent datasets, where more
information on the businesses is available.
In addition it
would be interesting to look interactions between businesses
other than the opening of a new business.

10. REFERENCES
[1] P. McCann. Industrial location economics. Edward

Elgar Publishing, 2002.

[2] F. Pedregosa, G. Varoquaux, A. Gramfort, V. Michel,

B. Thirion, O. Grisel, M. Blondel, P. Prettenhofer,
R. Weiss, V. Dubourg, et al. Scikit-learn: Machine
learning in python. The Journal of Machine Learning
Research, 12:2825–2830, 2011.

[3] M. E. Porter. Clusters and the new economics of
competition, volume 76. Harvard Business Review
Boston, 1998.

[4] H. Schmitz. Global competition and local cooperation:

success and failure in the sinos valley, brazil. World
development, 27(9):1627–1650, 1999.

that from the correlation metric. SVM is able to ﬁt bet-
ter with the presence of noise due to its possibly higher
VC dimension compared to that of logistic regression with
l1 regularization.(Overﬁtting behavior of SVM compared to
logistic regression classiﬁer is also evident in the ﬁrst 3 rows
of Table 1). However, given higher ”signal to noise” ratio
(hence cleaner data), which we believe is present in the cor-
relation metric, it loses its comparative advantage against
logistic regression.

Following up from this idea, we have gone back to the
calculating the ﬁrst three metrics and chose diﬀerent val-
ues for the opening dates for the new businesses around the
previously estimated values. In quite a few cases, we have
observed considerable changes in the values for the metrics
(data not shown, however on average 15-20% of the pairwise
metric values in the cluster of interest have shown consid-
erable variation, with the majority of the pairwise values
eﬀected at diﬀerent levels). This observation supports our
suspicions about the discrepancies in the classiﬁcation accu-
racies.

One last thing worth mentioning is that, for the corre-
lation analysis, the training accuracies were quite close to
the 10 fold CV accuracies (≤ 3% diﬀerence for logistic re-
gression and ≤ 5% diﬀerence for SVM, last row of Table 1).
This fact suggests that the relationships between businesses
within cluster are predicted across disjoint subpopulations
inside the cluster. This is important in answering the prac-
tical question of whether the correlation between any two
novel businesses may be predicted by using a precalculated
predicted model.

8. CONCLUSION

We tried to predict the interaction of two businesses with
multiple models. The quality of our predictions turned out
to be relatively low for most models. Possible reasons are:
• The rating data is noisy and sparse at the same time.
Most businesses don’t have ratings every day and the
variance of the ratings for a given time period is high.
• The training score of SVM is high in general but the
cross-validation score is low in a lot of cases which may
be a hint that SVM is overﬁtting.

• For the conditional mean analysis and the trend anal-
ysis, we assume that the opening date of the business
is close to the ﬁrst review submitted for the business.
This might not always be the case.

We achieved good results when predicting correlation and
this shows that our approach has merit. We also observed
that SVM generally outperformed logistic regression in cases
other than correlation analysis.

9. FUTURE WORK

We have already performed diﬀerent types of clustering
on the data and chose the best one based on the geograph-
ical location of the businesses.
It would be interesting to
perform other types of clustering techniques based on the
features distance metrics described in the features section,
and study how the correlated businesses are geographically
located. This would allow us to analyze the structure of a
cluster, e.g. whether a given cluster consists of many simi-
lar businesses (for example Chinatown in San Francisco) or

5

